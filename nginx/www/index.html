<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Test</title>
<script>
function replaceDoc() {
	location.replace('https://www.baidu.com');
}
function iframeDoc() {
	document.querySelector('#myiframe').src = 'https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzA4NzQwMjMxMA==#wechat_redirect';
}
function xmlDoc() {
	var url = window.location.href;
	var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
	function rebuild(html) {
		html = html.replace(/id=\"myiframe\"/g, 'src="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzA4NzQwMjMxMA==#wechat_redirect"');
		var newDoc = document.open();
		newDoc.write(html);
		newDoc.close();
	}
	xmlhttp.onreadystatechange = function() {
		if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			rebuild(xmlhttp.responseText);
		}
	}
	xmlhttp.open('GET', url, 1);
	xmlhttp.send();
}
window.onbeforeunload = function(e) {
	e = e || window.event;
	if (e) {
		e.returnValue = 'STOP';
	}
	return 'STOP';
}
</script>
</head>

<body>
<div id="root">
	<p>New Window：<a href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzAwMTAzNTAwMA==#wechat_redirect" target="_blank">NodeJs之路</a></p>
	<p>Replace: <input type="button" value="百度" onclick="replaceDoc()"></p>
	<p>iFrame: <input type="button" value="福特中国" onclick="iframeDoc()"></p>
	<p><iframe id="myiframe"></iframe></p>
	<p>XML: <input type="button" value="福特中国" onclick="xmlDoc()"></p>
</div>
</html>
